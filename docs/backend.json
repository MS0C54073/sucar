{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Unique identifier for the user (from Firebase Auth)."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The user's active phone number."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": ["admin", "driver", "client", "provider"]
        },
        "avatarUrl": {
            "type": "string",
            "description": "URL for the user's profile picture."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": ["userId", "name", "email", "phone", "role", "createdAt"]
    },
    "Car": {
        "title": "Car",
        "type": "object",
        "description": "Represents a client's vehicle.",
        "properties": {
            "make": {"type": "string"},
            "model": {"type": "string"},
            "year": {"type": "number"},
            "color": {"type": "string"},
            "plate": {"type": "string"}
        },
        "required": ["make", "model", "year", "color", "plate"]
    },
    "Client": {
      "title": "Client",
      "type": "object",
      "description": "Represents a client in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "nrcNumber": {
          "type": "string",
          "description": "The client's National Registration Card (NRC) number."
        },
        "cars": {
          "type": "array",
          "description": "An array of car details owned by the client.",
          "items": { "$ref": "#/entities/Car" }
        }
      },
      "required": ["userId", "nrcNumber"]
    },
    "Driver": {
      "title": "Driver",
      "type": "object",
      "description": "Represents a driver in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "licenseNo": {
          "type": "string",
          "description": "The driver's license number."
        },
        "licenseExpiry": {
          "type": "string",
          "description": "The expiration date of the driver's license.",
          "format": "date-time"
        },
        "address": {
          "type": "string",
          "description": "The driver's residential address."
        },
        "maritalStatus": {
          "type": "string",
          "enum": ["single", "married", "divorced", "widowed"]
        },
        "availability": {
          "type": "boolean",
          "description": "Indicates if the driver is available for pickups."
        },
        "documents": {
            "type": "object",
            "properties": {
                "nrcUrl": {"type": "string"},
                "licenseUrl": {"type": "string"},
                "proofOfAddressUrl": {"type": "string"}
            }
        }
      },
      "required": ["userId", "licenseNo", "licenseExpiry", "address", "maritalStatus", "availability"]
    },
    "Service": {
        "title": "Service",
        "type": "object",
        "description": "A service offered by a provider.",
        "properties": {
            "id": {"type": "string"},
            "name": {"type": "string"},
            "description": {"type": "string"},
            "price": {"type": "number"},
            "durationMinutes": {"type": "number"}
        },
        "required": ["id", "name", "price"]
    },
    "Provider": {
      "title": "Provider",
      "type": "object",
      "description": "Represents a car wash service provider.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "name": {
          "type": "string",
          "description": "The name of the car wash."
        },
        "location": {
          "type": "string",
          "description": "The address or location of the car wash."
        },
        "baysCount": {
          "type": "integer",
          "description": "The number of washing bays available."
        },
        "services": {
          "type": "array",
          "description": "An array of services offered by the car wash.",
          "items": { "$ref": "#/entities/Service" }
        },
        "approved": {
          "type": "boolean",
          "description": "Indicates if the provider is approved by SuCAR admin."
        }
      },
      "required": ["userId", "name", "location", "baysCount", "approved"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a car wash booking.",
      "properties": {
        "clientId": { "type": "string" },
        "clientName": { "type": "string" },
        "driverId": { "type": "string" },
        "driverName": { "type": "string" },
        "providerId": { "type": "string" },
        "providerName": { "type": "string" },
        "pickupLocation": { "type": "string" },
        "carDetails": { "$ref": "#/entities/Car" },
        "service": { "$ref": "#/entities/Service" },
        "status": {
          "type": "string",
          "enum": ["requested", "picked_up", "in_wash", "drying", "done", "delivered", "cancelled"]
        },
        "timestamps": {
            "type": "object",
            "properties": {
                "createdAt": {"type": "string", "format": "date-time"},
                "updatedAt": {"type": "string", "format": "date-time"},
                "pickupAt": {"type": "string", "format": "date-time"},
                "deliveryAt": {"type": "string", "format": "date-time"}
            }
        },
        "cost": {"type": "number"}
      },
      "required": ["clientId", "providerId", "pickupLocation", "carDetails", "service", "status", "timestamps", "cost"]
    },
    "Payment": {
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment for a booking.",
      "properties": {
        "bookingId": { "type": "string" },
        "amount": { "type": "number" },
        "method": { 
            "type": "string",
            "enum": ["cash", "mobile_money", "card"]
        },
        "status": {
            "type": "string",
            "enum": ["pending", "paid", "failed"]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["bookingId", "amount", "method", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public user profile information."
    },
    "/clients/{clientId}": {
        "schema": { "$ref": "#/entities/Client" },
        "description": "Stores client-specific information."
    },
    "/drivers/{driverId}": {
      "schema": { "$ref": "#/entities/Driver" },
      "description": "Stores driver-specific information."
    },
    "/providers/{providerId}": {
      "schema": { "$ref": "#/entities/Provider" },
      "description": "Stores car wash provider information."
    },
    "/bookings/{bookingId}": {
      "schema": { "$ref": "#/entities/Booking" },
      "description": "Stores booking information."
    },
    "/payments/{paymentId}": {
      "schema": { "$ref": "#/entities/Payment" },
      "description": "Stores payment information related to bookings."
    }
  }
}
