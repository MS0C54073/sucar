
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Unique identifier for the user (from Firebase Auth)."
        },
        "name": {
          "type": "string",
          "description": "The user's full name."
        },
        "email": {
          "type": "string",
          "description": "The user's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "The user's active phone number."
        },
        "role": {
          "type": "string",
          "description": "The user's role in the system.",
          "enum": ["admin", "driver", "client", "provider"]
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the user account was created.",
          "format": "date-time"
        }
      },
      "required": ["userId", "name", "email", "phone", "role", "createdAt"]
    },
    "Vehicle": {
        "title": "Vehicle",
        "type": "object",
        "description": "Represents a client's vehicle.",
        "properties": {
            "vehicleId": {"type": "string"},
            "clientId": {"type": "string"},
            "make": {"type": "string"},
            "model": {"type": "string"},
            "plate_no": {"type": "string"},
            "color": {"type": "string"}
        },
        "required": ["vehicleId", "clientId", "make", "model", "plate_no", "color"]
    },
    "Client": {
      "title": "Client",
      "type": "object",
      "description": "Represents a client in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "nrcNumber": {
          "type": "string",
          "description": "The client's National Registration Card (NRC) number."
        }
      },
      "required": ["userId", "nrcNumber"]
    },
    "Driver": {
      "title": "Driver",
      "type": "object",
      "description": "Represents a driver in the SuCAR system.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "name": {"type": "string"},
        "phone": {"type": "string"},
        "licenseNo": {
          "type": "string",
          "description": "The driver's license number."
        },
        "address": {
          "type": "string",
          "description": "The driver's residential address."
        },
        "maritalStatus": {
          "type": "string",
          "enum": ["single", "married", "divorced", "widowed"]
        },
        "availability": {
          "type": "boolean",
          "description": "Indicates if the driver is available for pickups."
        },
        "documents": {
            "type": "object",
            "properties": {
                "nrcUrl": {"type": "string"},
                "licenseUrl": {"type": "string"},
                "proofOfAddressUrl": {"type": "string"}
            }
        },
        "approved": {"type": "boolean"}
      },
      "required": ["userId", "name", "phone", "licenseNo", "address", "maritalStatus", "availability", "approved"]
    },
    "Service": {
        "title": "Service",
        "type": "object",
        "description": "A service offered by a provider.",
        "properties": {
            "id": {"type": "string"},
            "name": {"type": "string"},
            "description": {"type": "string"},
            "price": {"type": "number"},
            "durationMinutes": {"type": "number"}
        },
        "required": ["id", "name", "price"]
    },
    "Provider": {
      "title": "Provider",
      "type": "object",
      "description": "Represents a car wash service provider.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "FK to User collection."
        },
        "name": {
          "type": "string",
          "description": "The name of the car wash."
        },
        "location": {
          "type": "string",
          "description": "The address or location of the car wash."
        },
        "baysCount": {
          "type": "integer",
          "description": "The number of washing bays available."
        },
        "services": {
          "type": "array",
          "description": "An array of services offered by the car wash.",
          "items": { "$ref": "#/entities/Service" }
        },
        "approved": {
          "type": "boolean",
          "description": "Indicates if the provider is approved by SuCAR admin."
        }
      },
      "required": ["userId", "name", "location", "baysCount", "approved"]
    },
    "Booking": {
      "title": "Booking",
      "type": "object",
      "description": "Represents a car wash booking.",
      "properties": {
        "bookingId": { "type": "string" },
        "clientId": { "type": "string" },
        "driverId": { "type": "string" },
        "pickupLocation": { "type": "string" },
        "status": {
          "type": "string",
          "enum": ["requested", "confirmed", "picked_up", "in_wash", "drying", "done", "delivered", "cancelled"]
        },
        "createdAt": {"type": "string", "format": "date-time"}
      },
      "required": ["bookingId", "clientId", "driverId", "pickupLocation", "status", "createdAt"]
    },
    "Payment": {
      "title": "Payment",
      "type": "object",
      "description": "Represents a payment for a booking.",
      "properties": {
        "paymentId": { "type": "string" },
        "bookingId": { "type": "string" },
        "amount": { "type": "number" },
        "method": { 
            "type": "string",
            "enum": ["cash", "mobile_money", "card"]
        },
        "status": {
            "type": "string",
            "enum": ["pending", "paid", "failed"]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["paymentId", "bookingId", "amount", "method", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public user profile information."
    },
    "/clients/{clientId}": {
        "schema": { "$ref": "#/entities/Client" },
        "description": "Stores client-specific information."
    },
    "/vehicles/{vehicleId}": {
      "schema": { "$ref": "#/entities/Vehicle" },
      "description": "Stores details about client vehicles."
    },
    "/drivers/{driverId}": {
      "schema": { "$ref": "#/entities/Driver" },
      "description": "Stores driver-specific information, including approval status."
    },
    "/providers/{providerId}": {
      "schema": { "$ref": "#/entities/Provider" },
      "description": "Stores car wash provider information, including approval status."
    },
    "/bookings/{bookingId}": {
      "schema": { "$ref": "#/entities/Booking" },
      "description": "Stores booking information."
    },
    "/payments/{paymentId}": {
      "schema": { "$ref": "#/entities/Payment" },
      "description": "Stores payment information related to bookings."
    }
  }
}
